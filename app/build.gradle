plugins {
    id 'java'
    id 'application'
    id 'org.liquibase.gradle' version '2.1.1' // Liquibase Gradle plugin
}

repositories {
    mavenCentral()
}

dependencies {
    // Lombok (latest version compatible with Java 21)
    compileOnly 'org.projectlombok:lombok:1.18.30'
    annotationProcessor 'org.projectlombok:lombok:1.18.30'

    // JDBC / MySQL driver
    implementation 'mysql:mysql-connector-java:8.1.0'

    // JUnit for testing
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.0'

    // Optional: Guava or other utilities
    implementation 'com.google.guava:guava:32.1.2-jre'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

application {
    mainClass = 'org.example.ui.MainMenu'
}

tasks.named('test') {
    useJUnitPlatform()
}

// Liquibase configuration
liquibase {
    activities {
        main {
            changeLogFile 'src/main/resources/db/changelog/db.changelog-master.xml'
            url 'jdbc:mysql://localhost:3306/board'
            username 'root'
            password 'root'
            driver 'com.mysql.cj.jdbc.Driver'
        }
    }
    runList = 'main'
}
